# 背景
文件名：2025-11-24_1
创建于：2025-11-24_10:00:00
创建者：CatPaw
任务分支：main

# 任务描述
重构项目技术路线，从错误的 KD 模型转向基于 YODEL 模型的屈服应力预测。评估现有数据和文档，制定实施计划。

# 项目概览
目标是预测火箭燃料搅拌后的屈服应力。目前数据仅包含混合过程的时间序列（扭矩、转速等），缺少关键的粒径分布（PSD）和屈服应力实测值。需利用机理模型（YODEL）生成合成数据以弥补数据缺失。

⚠️ 警告：永远不要修改此部分 ⚠️
[此部分应包含核心RIPER-5协议规则的摘要，确保它们可以在整个执行过程中被引用]
- 模式声明：必须在响应开头声明 [MODE: ...]
- 核心思维：系统、辩证、创新、批判
- 规划：必须有详细的实施清单
- 执行：严格遵循计划，记录进度
- 审查：验证实施与计划的一致性
⚠️ 警告：永远不要修改此部分 ⚠️

# 分析
1.  **现有代码 (`main.py`)**：
    -   使用 KD 模型 (`eta_r = (1 - X) ** (-eta * Phi_m)`) 和 Arrhenius 方程。
    -   **问题**：KD 模型预测的是粘度，无法直接物理地推导出屈服应力（目前是通过经验幂律 `C * (eta_r - 1) ** p` 强行关联）。这违反了“禁止经验推断”的约束。
2.  **文档 (`docs/会话记忆.md`)**：
    -   明确指定使用 YODEL 模型 (Flatt & Bowen, 2006)。
    -   核心公式：$\tau_0 = m_1 \frac{\Phi_m(\Phi_m-\Phi)}{\Phi(\Phi-\Phi_c)^2}$。
    -   引入混合功 $E_{mix}$ 修正 $\Phi_m$：$\Phi_m(E_{mix}) = \Phi_{m,0} + \Delta\Phi_m(1 - e^{-k_E E_{mix}})$。
    -   **结论**：这是正确的技术路线。
3.  **数据 (`data/`)**：
    -   包含混合过程的时间序列（扭矩、转速、温度）。
    -   **缺失**：PSD 数据（计算 $m_1, \Phi_c$ 所需）、配方参数 $\Phi$、实测屈服应力 $\tau_0$。
    -   **结论**：无法直接用现有数据训练模型。必须先构建基于 YODEL 的合成数据生成器。

# 提议的解决方案
1.  **废弃旧模型**：移除 `main.py` 中的 KD 相关机理代码。
2.  **实现 YODEL 机理**：
    -   编写 `yodel_mechanism` 函数。
    -   输入：PSD 参数 ($R_{v,50}, F_{\sigma,\Lambda}$), $\Phi$, $E_{mix}$。
    -   输出：$\tau_0$。
3.  **数据生成**：
    -   基于物理合理的范围随机生成 PSD 参数和 $\Phi$。
    -   模拟 $E_{mix}$ 分布。
    -   生成合成数据集 $(X, y)$。
4.  **真实数据预处理**：
    -   编写脚本从 Excel 计算 $E_{mix}$（积分 Torque * Speed）。
    -   为未来结合实测数据做准备。

# 当前执行步骤："[步骤编号和名称]"
- 6. 任务完成

# 任务进度
[2025-11-24_10:05:00]
- 已创建任务文件。
- 分析了现有代码和数据。
- 确认了 YODEL 路线的必要性。

[2025-11-24_11:05:00]
- 完成了所有代码实施。
- 验证了生成和训练流程。
- 修复了维度不匹配和导入错误。
- 状态：成功。

# 最终审查
实施与计划完全匹配。项目已成功迁移到 PINN + YODEL 架构。

